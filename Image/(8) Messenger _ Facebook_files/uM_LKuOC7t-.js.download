if (self.CavalryLogger) { CavalryLogger.start_js(["FpQiK"]); }

__d("MercuryIgnoredBlockedParticipants.re",["bs_curry","MercuryIgnoredBlockedParticipants.bs"],(function(a,b,c,d,e,f){a=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs,a,c,d);return a};f.qualifiesAs=a;c=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock,a,c,d);return a};f.shouldShowBlock=c}),null);
__d("MessengerGroupUtils.bs",["MessengerView","SearchableEntry","MessengerActions","MessengerComposerActions"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=a.filter(function(a,b,d){if(a==null)return!1;else return a.fbid!==c});a.forEach(function(a,c,d){c={uniqueID:a.fbid,title:a.name,auxiliaryData:0};d=new(b("SearchableEntry"))(c);b("MessengerComposerActions").addToken(d);return 0});b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);return 0}f.createGroupThread=a}),null);
__d("MessengerGroupUtils.re",["bs_curry","MessengerGroupUtils.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerGroupUtils.bs").createGroupThread,a,c);return a};f.createGroupThread=a}),null);
__d("WorkForeignEntityInfo.re",["WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){a=b("WorkForeignEntityInfo.bs").isCoworker;f.isCoworker=a;c=b("WorkForeignEntityInfo.bs").areAllCoworkers;f.areAllCoworkers=c}),null);
__d("WIGFileSelector.react",["CometFileSelector.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx(b("CometFileSelector.react"),babelHelpers["extends"]({},a))}e.exports=a}),null);
__d("WIGFRX.entrypoint",["CometFRXQuery$Parameters","JSResource"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.entryPoint,d=a.id,e=a.location;a=a.responsible_id;return{queries:{frx:{parameters:b("CometFRXQuery$Parameters"),variables:{input:{entry_point:c,id:d,location:e,responsible_id:a}}}}}},root:b("JSResource")("WIGFRX.react").__setRef("WIGFRX.entrypoint")};e.exports=a}),null);
__d("WorkGalahadAsyncStatefulActionHelper",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useReducer;function h(a,b){switch(b.type){case"reset":return{loading:!1,requested:!1,error:null};case"startAction":return babelHelpers["extends"]({},a,{loading:!0,error:null});case"actionSuccess":return babelHelpers["extends"]({},a,{loading:!1,requested:!0});case"actionFailed":return babelHelpers["extends"]({},a,{loading:!1,requested:!0,error:b.error});default:return a}}c={useAsyncActionReducer:function(){var a=g(h,{loading:!1,requested:!1,error:null}),b=a[0],c=b.error,d=b.loading;b=b.requested;a=a[1];var e=!d&&b&&c==null,f=!d&&b&&c!=null;return[{loading:d,requested:b,error:c,isSuccessful:e,isFailed:f},a]}};e.exports=c}),null);
__d("WorkGalahadBlockChatDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadConfirmBlockThreadDialog.react").__setRef("WorkGalahadBlockChatDropdownMenuItem.react");function a(a){var c=a.isBlocked,d=a.thread;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"friend_block",label:c?g._("Unblock messages"):g._("Block messages"),onClick:function(){c?b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unblockOnMessengerDotCom(d.thread_id):e({thread:d})}})}e.exports=a}),null);
__d("WorkGalahadChangeChatEmojiDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeEmojiDialog.react").__setRef("WorkGalahadChangeChatEmojiDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"emoji",label:g._("Change emoji"),onClick:function(){d({thread:c})}})}e.exports=a}),null);
__d("WorkGalahadChangeChatPhotoMenuItem.react",["fbt","AsyncRequest","FileInputUploader","LayerFadeOnHide","MercuryConfig","MercuryIDs","React","WIGDropdownMenuItem.react","WIGFileSelector.react","WorkGalahadAsyncStatefulActionHelper","XMessagingSetThreadImageController","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useCallback,j=b("WorkGalahadAsyncStatefulActionHelper").useAsyncActionReducer;function a(a){var c=a.desc,d=a.icons,e=a.label,f=a.threadID;a=j();var l=a[0],m=l.error,n=l.isFailed;l=l.loading;var o=a[1],p=i(function(){o({type:"actionFailed",error:g._("There was an error during the uploading process.")})},[]),q=i(function(a,c){a=c.response.payload;a=(c=a.metadata[0])==null?void 0:c.image_id;if(!a)return;c=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(f),thread_image_id:a}).setHandler(function(){o({type:"actionSuccess"})}).setErrorHandler(function(a){p()}).send()},[f]),r=i(function(a){a=a[0];if(!a)return;o({type:"startAction"});a=new(b("FileInputUploader"))().setFiles({file:a}).setURI(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});a.subscribe("success",q);a.subscribe("failure",p);a.send()},[f,q,p]),s=null;a=function(a){var c=a.children;return h.jsxs(h.Fragment,{children:[h.jsx(b("WIGFileSelector.react"),{onFilesSelected:r,accept:["image/*"],children:function(a){s=a;return c}}),h.jsx(k,{shown:n,onHide:function(){o({type:"reset"})},description:m})]})};return h.jsx(b("WIGDropdownMenuItem.react"),{LinkRenderer:a,label:e,icons:d,desc:c,isLoading:l,hideOnClick:!1,onClick:function(){s&&s()}})}function k(a){var c=a.description,d=a.onHide;a=a.shown;return h.jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,onHide:d,shown:a,width:400,children:[h.jsx(b("XUIDialogTitle.react"),{children:g._("Failed to change group photo")}),h.jsx(b("XUIDialogBody.react"),{children:c}),h.jsx(b("XUIDialogFooter.react"),{children:h.jsx(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})})]})}e.exports=a}),null);
__d("WorkGalahadCreateGroupFromChatMenuItem.react",["fbt","JSResource","MessengerParticipants.re","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadCreateGroupFromChatDialog.react").__setRef("WorkGalahadCreateGroupFromChatMenuItem.react");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(i);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"group_plus",label:g._("Create group"),onClick:function(){d({onClose:function(){},thread:c,participants:c.participants.map(b("MessengerParticipants.re").getNow).filter(Boolean)})}},"create-group")}e.exports=a}),null);
__d("WorkGalahadDeleteChatMenuItem.react",["fbt","JSResource","MessagingTag","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadDeleteChatHistoryDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),j=b("JSResource")("WorkGalahadHideChatDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),k=function(a){var c=a.showDescription,d=a.showHideButton,e=a.thread;a=b("useWIGLazyDialog")(i);var f=a[0];a={label:g._("Delete message history"),desc:g._("Delete your copy of this chat and all of the messages within it."),onClick:function(){f({showHideButton:d,thread:e,onClose:function(){}})}};if(!c){delete a.desc;return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({icons:"trash"},a))}return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({},a))},l=function(a){var c=a.thread;a=b("useWIGLazyDialog")(j);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{label:g._("Permanently hide"),desc:g._("This chat will be moved to \"Permanently hidden\" and will stay there until you unhide it."),onClick:function(){d({thread:c,onClose:function(){}})}})};function a(a){a=a.thread;var c=a.folder===b("MessagingTag").OTHER;if(!a.is_subscribed||a.is_archived||c)return h.jsx(k,{showHideButton:!1,showDescription:!1,thread:a});var d=[];c||d.push(h.jsx(l,{thread:a},"hide-chat-permanently"));d.push(h.jsx(k,{showHideButton:!0,showDescription:!0,thread:a},"delete-chat-history"));return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"trash",label:g._("Remove chat"),items:d},"remove-chat")}e.exports=a}),null);
__d("WorkGalahadDropdownMenuHelper",["React","WIGDropdownMenuItem.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={createItemsFromSections:function(a,c){c===void 0&&(c="separator");return a.reduce(function(a,d){if(d.length===0)return a;if(a.length===0)return d;var e=a.length;return[].concat(a,[g.jsx(b("WIGDropdownMenuItem.react").Separator,{},c+"-"+e)],d)},[])}};e.exports=a}),null);
__d("WorkGalahadEditChatColorDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeColourDialog.react").__setRef("WorkGalahadEditChatColorDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"color",label:g._("Change colour"),onClick:function(){d({thread:c})}},"edit-chat-color")}e.exports=a}),null);
__d("WorkGalahadEditChatNameDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadRenameChatThreadDialog.react").__setRef("WorkGalahadEditChatNameDropdownMenuItem.react");function a(a){var c=a.onSave,d=a.previousThreadName;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"text",label:g._("Rename chat"),onClick:function(){e({onSave:c,previousThreadName:d})}},"rename-chat")}e.exports=a}),null);
__d("WorkGalahadEditChatNicknamesDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","MercuryThreadInfo","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("MWChatChangeNicknameDialog").__setRef("WorkGalahadEditChatNicknamesDropdownMenuItem.react");function a(a){var c=a.thread,d=babelHelpers.objectWithoutPropertiesLoose(a,["thread"]);a=b("useWIGLazyDialog")(i);var e=a[0];a=a[1];return h.jsx("div",{ref:a,children:h.jsx(b("WIGDropdownMenuItem.react"),{icons:"pencil_underline",label:g._("Edit nicknames"),onClick:function(){e(babelHelpers["extends"]({},d,{onNicknameChange:function(a,d){b("MercuryThreadInfo").isEmptyLocalThread(c)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadNicknames(c.thread_id,a,d,"thread_settings")}}))}},"edit-chat-nicknames")})}e.exports=a}),null);
__d("useWorkGalahadChatReportDialog",["requireCond","cr:1373380","MercuryIDs","MercuryThreadIDMap","cr:1373381","WIGFRX.entrypoint","useWIGEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d;c==null?d=b("MercuryIDs").getUserIDFromThreadID(a.thread_id):d=b("MercuryIDs").isLocalThread(a.thread_id)?b("MercuryThreadIDMap").get().getServerIDFromClientIDNow(a.thread_id):b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);d=btoa("message_thread:"+((d=d)!=null?d:""));d=b("useWIGEntryPointDialog")(b("WIGFRX.entrypoint"),{entryPoint:"REPORT_BUTTON",id:d,responsible_id:c!=null?b("MercuryIDs").tokenize(c).value:void 0,location:"messenger_direct_thread_details"});var e=d[0];return b("cr:1373380")&&b("cr:1373381")?function(){c!=null?b("cr:1373380").FRXClicked(a.thread_id,!0,c):b("cr:1373381").bootloadFRXDialog(a.thread_id)}:function(){return e({})}}e.exports=a}),null);
__d("WorkGalahadReportChatMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog","useWorkGalahadChatReportDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadReportChatParticipantDialog.react").__setRef("WorkGalahadReportChatMenuItem.react");function a(a){var c=a.thread;a=a.isSubtitleVisible;var d=b("useWIGLazyDialog")(i),e=d[0],f=b("useWorkGalahadChatReportDialog")(c);return h.jsx(b("WIGDropdownMenuItem.react"),{icons:"report",label:g._("Report chat"),desc:a?g._("Give feedback and report something a person has shared in this chat"):null,onClick:function(){c.is_canonical?f():e({thread:c,onClose:function(){}})}})}e.exports=a}),null);
__d("WorkGalahadChatMenuHelper",["fbt","requireCond","Arbiter","CurrentUser","FollowButtonFollowMutation","FollowButtonUnfollowMutation","JSResource","MercuryIDs","MercuryIgnoredBlockedParticipants.re","MercuryThreadActions","MercuryThreadInfo","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerComposerActions","MessengerGroupUtils.re","MessengerParticipants.re","MessengerState.re","QPLUserFlow","QPLUtils","React","WIGDropdownMenuItem.react","WorkForeignEntityInfo.re","WorkGalahadBlockChatDropdownMenuItem.react","WorkGalahadChangeChatEmojiDropdownMenuItem.react","WorkGalahadChangeChatPhotoMenuItem.react","WorkGalahadCreateGroupFromChatMenuItem.react","WorkGalahadDeleteChatMenuItem.react","WorkGalahadDropdownMenuHelper","WorkGalahadEditChatColorDropdownMenuItem.react","WorkGalahadEditChatNameDropdownMenuItem.react","WorkGalahadEditChatNicknamesDropdownMenuItem.react","WorkGalahadReportChatMenuItem.react","cr:1278240","cr:1278241","formatDate","gkx","immutable","nullthrows","stylex","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("QPLUtils").deriveInstanceKey,j=b("React"),k=b("JSResource")("WorkGalahadLeaveThreadDialog.react").__setRef("WorkGalahadChatMenuHelper"),l=b("gkx")("1259767"),m={redLabel:{color:"eaqjevrq"},redLabelHovered:{color:"hk9qcz1a"}},n=3600,o={createMuteChatItems:function(a){var c=a==null?void 0:a.mute_until,d=g._("Mute chat"),e=g._("Pause notifications for messages"),f=o.isChatMuted(a);f&&(d=g._("Unmute chat"),e=function(a){a=a.hovered;return j.jsx("span",{className:(h||(h=b("stylex")))(m.redLabel,a&&m.redLabelHovered),children:c===-1?g._("Muted indefinitely"):g._("Muted until {date}",[g._param("date",b("formatDate")(c,{today:"g:ia",withinDay:"g:ia",thisYear:"M jS, g:ia",future:"M d, Y g:ia"}))])})});return f?[j.jsx(b("WIGDropdownMenuItem.react"),{label:d,desc:e,icons:"bell_null",onClick:function(){return o.unmuteChat(a)}},"chat-notification")]:[j.jsx(b("WIGDropdownMenuItem.react"),{label:d,desc:e,icons:"bell_null_cross",items:o.createChatMuteOptionsMenu(!0,function(b){o.muteChat(a,b)},a)},"chat-notification")]},isChatMuted:function(a){a=a==null?void 0:a.mute_until;return a!=null&&Number.isInteger(a)&&(a===-1||a*1e3>Date.now())},unmuteChat:function(a){if(a==null||!o.isChatMuted(a))return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,0)},muteChat:function(a,c){if(a==null)return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,c)},createGroupChatMuteExplanationItem:function(){return j.jsx(b("WIGDropdownMenuItem.react"),{label:g._("While muted, you'll still be notified about {\u0040mentions} in this chat.",[g._param("@mentions",j.jsx("strong",{children:"@mentions"}))]),isStatic:!0},"mention")},createChatMuteOptionsMenu:function(a,c,d){return[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Mute this chat...")},"mute-chat-header")].concat(o.createChatMuteOptionItems(a,c)).concat(d!=null&&!d.is_canonical?[j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"mute-chat-separator"),o.createGroupChatMuteExplanationItem()]:[])},createChatMuteOptionItems:function(a,c){var d;return[j.jsx(d=b("WIGDropdownMenuItem.react"),{label:g._("For 1 hour"),onClick:function(){c(n)},navigateBackOnClick:a},"chat-mute-1-hour"),j.jsx(d,{label:g._("For 2 hours"),onClick:function(){c(2*n)},navigateBackOnClick:a},"chat-mute-2-hour"),j.jsx(d,{label:g._("Until tomorrow at 8 am"),onClick:function(){var a=new Date(),b=a.getHours()>=8;b&&a.setDate(a.getDate()+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-until-tomorrow"),j.jsx(d,{label:g._("Until next week (Monday at 8 am)"),onClick:function(){var a=new Date();a.setDate(a.getDate()+(7-a.getDay())%7+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-next-week"),j.jsx(d,{label:g._("Until I change it"),onClick:function(){c(-1)},navigateBackOnClick:a},"chat-mute-until-changed")]},createCustomizeItems:function(a){var c=[];!a.is_canonical&&!a.work_associated_group&&(a.is_subscribed&&!a.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,b("CurrentUser").getAccountID())&&(b("gkx")("997564")||c.push(j.jsx(b("WorkGalahadEditChatNameDropdownMenuItem.react"),{previousThreadName:a.name,onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeGroupThreadName(a.thread_id,c)}},"rename-chat")),c.push(j.jsx(b("WorkGalahadChangeChatPhotoMenuItem.react"),{icons:"photo",label:g._("Change chat photo"),threadID:a.thread_id},"change-chat-photo"),j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"customize-options-separator"))));if(a.customization_enabled){var d=new Map();a.participants.forEach(function(c){var e;c=b("MessengerParticipants.re").getNow(c);e=(e=a.custom_nickname)!=null?e:{};if(c){var f,g=c.fbid;d.set(g,{contactId:g,name:(f=e[g])!=null?f:c.short_name,actualName:c.name,nickname:e[g],profileUrl:(f=c.href)!=null?f:void 0,profilePictureUrl:(e=c.image_src)!=null?e:void 0,isContact:c.is_friend,isAdmin:b("MessengerAdminGroupUtils").isAdmin(a.admins,c.fbid)})}});c.push(j.jsx(b("WorkGalahadEditChatNicknamesDropdownMenuItem.react"),{thread:a,participants:d,onClose:function(){}},"edit-chat-nicknames"));c.push(j.jsx(b("WorkGalahadEditChatColorDropdownMenuItem.react"),{thread:a},"edit-chat-color"));c.push(j.jsx(b("WorkGalahadChangeChatEmojiDropdownMenuItem.react"),{thread:a},"change-chat-emoji"))}if(c.length===0)return[];var e=a.is_canonical||a.work_associated_group?g._("Edit emoji, nicknames and more"):g._("Edit chat name, photo and more");return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"pencil",label:g._("Customise chat"),desc:e,items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Customise chat")},"customize-chat-header")].concat(c)},"customize-chat")]},getOnHideChatCallback:function(a){return function(){var c;p((c=a.thread_fbid)!=null?c:"");c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_pinned===!0&&c.unpin(a.thread_id);c.archive(a.thread_id);b("MessengerActions").selectThread(null)}},getOnUnhideChatCallback:function(a){return function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_archived===!0&&c.unarchive(a.thread_id);a.folder===b("MessagingTag").OTHER&&c.changeFolder(a.thread_id,b("MessagingTag").INBOX);b("MessengerActions").selectThread(a.thread_id)}},createHideChatItems:function(a){var c=a.folder===b("MessagingTag").OTHER;if(!a.is_archived&&!c)return[j.jsx(b("WIGDropdownMenuItem.react"),{label:l?g._("Archive"):g._("Hide chat"),icons:l?"box":"hide",desc:l?null:g._("Hide this chat from your inbox"),onClick:this.getOnHideChatCallback(a)},"hide-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{label:l?g._("Unarchive"):g._("Unhide chat"),icons:"undo",desc:l?null:g._("Show this chat in your inbox"),onClick:this.getOnUnhideChatCallback(a)},"unhide-chat")]},createRemoveChatItems:function(a){return[j.jsx(b("WorkGalahadDeleteChatMenuItem.react"),{thread:a},"delete-chat-wrapper")]},useBlockMessagesItems:function(a){var c=b("CurrentUser").getID(),d=!1;b("MessengerState.re").compute(c,function(e){e=e.blocked_ids;d=b("MercuryIgnoredBlockedParticipants.re").qualifiesAs(c,e,a)});var e=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);e=e!=null?b("MessengerParticipants.re").getNow(e):null;if(e==null)return[];return!b("MercuryIgnoredBlockedParticipants.re").shouldShowBlock(a,c,e)?[]:[j.jsx(b("WorkGalahadBlockChatDropdownMenuItem.react"),{isBlocked:d,thread:a},"block-chat")]},createReportChatItems:function(a,c){var d=b("CurrentUser").getID();if(a.message_count===0||a.participants.length<=1)return[];return a.participants.map(function(a){return b("MessengerParticipants.re").getNow(a)}).find(function(a){return(a==null?void 0:a.id)!==b("MercuryIDs").getParticipantIDFromUserID(d)&&(a==null?void 0:a.user_type)!=="page"})==null?[]:[j.jsx(b("WorkGalahadReportChatMenuItem.react"),{thread:a,isSubtitleVisible:c},"report-chat")]},createChatPrivacySubMenuItems:function(a){if(a==null)return[];var c=a.other_user_fbid===b("CurrentUser").getID(),d=b("MercuryThreadInfo").isEmptyLocalThread(a),e=this.useBlockMessagesItems(a);if(!a.is_subscribed||c||d)return[];c=o.createReportChatItems(a,!0);return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([[].concat(c),[].concat(e)])},createPrivacyItems:function(a){var c=o.createChatPrivacySubMenuItems(a);if(a==null)return[];if(c.length===0)return[];return c.length===1?o.createReportChatItems(a,!1):[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"privacy",label:g._("Privacy options"),items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Privacy options")},"privacy-options-header")].concat(c)},"privacy-chat-options")]},createAddMembersItems:function(a){return b("cr:1278240")?[j.jsx(b("cr:1278240"),{thread:a},"add-members")]:[]},createPinOrUnpinItems:function(a){if(!a.is_pinned&&(!a.is_subscribed||a.message_count===0))return[];if(!a.is_pinned)return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"pushpin",label:l?g._("Pin to top"):g._("Pin chat"),desc:l?null:g._("Pin this chat to the top of your inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).pin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"pushpin_slash",label:l?g._("Unpin"):g._("Unpin chat"),desc:l?null:g._("Unpin this chat in your inbox"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unpin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")]},createFollowOrUnfollowItems:function(a,c){if(a.participants.length>2||a.other_user_fbid==null||!b("gkx")("997564"))return[];if(c==="CAN_SUBSCRIBE")return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"follow",label:g._("Follow in News Feed"),onClick:function(){b("FollowButtonFollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"follow")];else if(c==="IS_SUBSCRIBED")return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"unfollow",label:g._("Unfollow in News Feed"),onClick:function(){b("FollowButtonUnfollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"unfollow")];else return[]},createAdminOptionsItems:function(a){var c=b("MessengerAdminGroupUtils").isAdmin(a.admins,b("CurrentUser").getID());if(a.is_canonical||!c)return[];c=!b("MessengerAdminGroupUtils").isApprovalOpenThread(a);c=[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("Membership approval")},"chat-admin-options-header"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{label:g._("On"),desc:g._("Admins can approve new people who are added by non-admins."),isChecked:c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(1,a)}},"membership-approval-on"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{label:g._("Off"),desc:g._("Any member can add new people to the chat without approval."),isChecked:!c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(0,a)}},"membership-approval-off")];var d=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));d=!b("WorkForeignEntityInfo.re").areAllCoworkers(d);a.is_subscribed&&!a.work_associated_group&&!d&&(c.push(j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"admin-create-group-option-separator")),c.push(j.jsx(b("WorkGalahadCreateGroupFromChatMenuItem.react"),{thread:a},"create-group")));return[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"badge_admin",label:g._("Admin options"),items:c},"chat-admin-options")]},useCreateLeaveItems:function(a){var c=b("useWIGLazyDialog")(k),d=c[0];return a==null||a.is_canonical||!a.is_subscribed?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"leave",label:g._("Leave"),onClick:function(){d({thread:a})}},"leave-chat")]},createNewGroupChatItems:function(a){return!a.is_canonical_user&&a.thread_type===1?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"messages_compose",label:g._("Create new group chat"),onClick:function(){var c=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));b("MessengerComposerActions").exitComposeStateAbandonSearch();b("MessengerGroupUtils.re").createGroupThread(c,b("CurrentUser").getID())}},"new-chat")]},createMarkAsReadOrUnreadItems:function(a){return a.unread_count>0?[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"envelope_open",label:g._("Mark as read"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markRead(a.thread_id)}},"mark-as-read-unread")]:[j.jsx(b("WIGDropdownMenuItem.react"),{icons:"envelope",label:g._("Mark as unread"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markUnread(a.thread_id)}},"mark-as-read-unread")]},createChatChannelOverflowMenuItems:function(a){if(l){var c;return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([b("cr:1278241")?[j.jsx(b("cr:1278241"),{thread:a,groupID:(c=a.work_associated_group)==null?void 0:c.id,isMuted:a.mute_until!=null},"notification-options")]:null,[].concat(o.createPinOrUnpinItems(a),o.createMarkAsReadOrUnreadItems(a)),[].concat(o.createHideChatItems(a),o.useCreateLeaveItems(a))].filter(Boolean))}return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([o.createPinOrUnpinItems(a),[].concat(o.createMuteChatItems(a),o.createHideChatItems(a)),[].concat(o.createMarkAsReadOrUnreadItems(a),o.createRemoveChatItems(a),o.useCreateLeaveItems(a))])}};function p(a){var c,d={instanceKey:i((c=a)!=null?c:"")};b("QPLUserFlow").start(57409537,d);var e=b("Arbiter").subscribe(["AsyncRequest/response","AsyncRequest/error","AsyncRequest/timeout"],function(c,f){var g=null;f=Object.keys((f=f==null?void 0:(f=f.request)==null?void 0:(f=f.data)==null?void 0:f.ids)!=null?f:{});Array.isArray(f)&&f.length>0&&(g=f[0]);if(a!==g)return;e.unsubscribe();c==="AsyncRequest/response"?b("QPLUserFlow").endSuccess(57409537,d):b("QPLUserFlow").endFailure(57409537,"unknown_error",d)})}e.exports=o}),null);
__d("WorkGalahadChatChannelOverflowMenu.react",["React","WIGDropdownMenu.react","WorkGalahadChatMenuHelper"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.label;a=a.thread;return g.jsx(b("WIGDropdownMenu.react"),{items:b("WorkGalahadChatMenuHelper").createChatChannelOverflowMenuItems(a),label:c,width:280,offsetX:-12})}e.exports=g.memo(a)}),null);